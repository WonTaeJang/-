<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>async/await</title>
</head>

<body>
    <input type="button" id='btn'   value="성공 판정 버튼">

    <script>
    // es8 문법 async/await
    // async - 함수 앞에만 사용가능, 성공만 확인 간증
    // 함수 실행 후 promise가 남는다.
    // await - async function 안에서 쓰는 await, then 대신 사용 
    async function add(){
        var 프로미스 = new Promise(function(성공, 실패){
            var opers = 1 + 1;
            성공(opers);
            //실패(100);
        });
        
        // 프로미스.then(function(){
        //     console.log('성공띠');
        // })


        try {
            var 결과 = await 프로미스;  // 프로미스가 해결될때까지 기다림 
            console.log(결과);
        }catch(e){
            console.log(e);
        }

        
    }

    add();

    // add().then(function(결과){
    //     console.log(결과 + '성공이에요');
    // })


    // 예제1
    // 버튼 클릭시 promise & 성공시 '성공했어요' 출력
    var btn = document.getElementById('btn');
    var count = 0;

    async function func(){
        var 연산 = new Promise(function(성공, 실패){
            if(count %2 == 0){
                성공('성공했어요.');
            }
            else{
                실패('실패입니다.');
            }

            count++;
        })

        var result = await 연산;
        console.log(result);
    } 
   


    btn.addEventListener('click', function(){
        func();
    })


    </script>
    
</body>

</html>